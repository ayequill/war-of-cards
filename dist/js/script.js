let deckId,str;const cardsHolder=document.getElementById("cards"),newGameBtn=document.getElementById("btn"),drawBtn=document.getElementById("drawBtn"),scoreBoard=document.querySelector("h2"),remainingCardsContainer=document.querySelector("h3"),scores=document.querySelectorAll("p");let playerScore=0,cpuScore=0;async function fetchApi(){const e=await fetch("https://www.deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1"),n=await e.json();return remainingCardsContainer.textContent=`Remaining cards: ${n.remaining}`,deckId=n.deck_id}async function drawCard(){const e=await fetch(`https://www.deckofcardsapi.com/api/deck/${deckId}/draw/?count=2`),n=await e.json();remainingCardsContainer.textContent=`Remaining cards: ${n.remaining}`,cardsHolder.children[0].innerHTML=`<img class="animate__animated animate__flipInX" src='${n.cards[0].image}'>`,cardsHolder.children[1].innerHTML=`<img class="animate__animated animate__flipInX" src='${n.cards[1].image}'>`,cardsHolder.children[0].style.border="none",cardsHolder.children[1].style.border="none",scoreBoard.textContent=determineCardWinner(n.cards[0],n.cards[1]),0===n.remaining&&(scoreBoard.textContent=playerScore<cpuScore?"CPU Won":cpuScore<playerScore?"Player Won":"war",drawBtn.disabled=!0),scores[0].textContent=`Computer: ${cpuScore}`,scores[1].textContent=`Me: ${playerScore}`}function determineCardWinner(e,n){const r=["2","3","4","5","6","7","8","9","10","JACK","QUEEN","KING","ACE"],t=r.indexOf(e.value),c=r.indexOf(n.value);return console.log(t),console.log(c),t<c?(console.log("secondCard won"),playerScore++,"You won!"):t>c?(console.log("firstCard won"),cpuScore++,"Computer won!"):"War!"}console.log(scores),newGameBtn.addEventListener("click",(()=>{fetchApi(),playerScore=0,cpuScore=0,scores.forEach((e=>e.textContent=""))})),drawBtn.addEventListener("click",(()=>{deckId||fetchApi(),drawCard()}));